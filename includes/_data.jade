
//- ///////////////////////////////////////////////////////////////////////////////
//- //
//- // This file holds 'global' data for all files in this project,
//- // including the pattern library and the sample sites.
//- //
//- ///////////////////////////////////////////////////////////////////////////////


mixin place($place, attr)
  p(itemscope="" itemtype="http://schema.org/Place")&attributes(attr || {})
    if $place.name
      span.-fw-7(itemprop="name")= $place.name
    if $place.street_address
      br
      span(itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress")
        span(itemprop="streetAddress")= $place.street_address
        br
        span(itemprop="addressLocality")= $place.address_locality
        = ', '
        span(itemprop="addressRegion")= $place.address_region
        = ' '
        span(itemprop="postalCode")= $place.postal_code
        if $place.address_country
          span(itemprop="addressCountry")= $place.address_country
    if $place.telephone
      br
      a(href='tel:'+$place.telephone itemprop="telephone")= $place.telephone
    if $place.url
      br
      a(href=$place.url itemprop="url")= $place.url

mixin sitetoc(arg)
  //- NOTE parameter validation
  -
    arg.pages   = arg.pages   || []
    arg.classes = arg.classes || {}
    arg.depth   = +arg.depth  || 0
    arg.icons   = !!arg.icons
  ul(class=arg.classes.listclasses)
    each $confPage in arg.pages
      unless $confPage.isHidden()
        li(class=arg.classes.itemclasses)
          a(class=arg.classes.linkclasses href=$confPage.url() title=$confPage.name())
            if arg.icons && $confPage.getIcon()
              i.material-icons= $confPage.getIcon()
            span= $confPage.name()
          if $confPage.findAll().length && arg.depth > 0
            +sitetoc({pages: $confPage.findAll(), classes: arg.classes.sub, depth: arg.depth-1, icons: false})

//- mixin promotedLocation(promoloc)
  - promoloc = promoloc || {} // NOTE parameter validation
  if promoloc.title && promoloc.text
    abbr(title=promoloc.title)= promoloc.text
  else
    = (promoloc.text || promoloc)

mixin highlightButtons(links, more_classes)
  ul.o-List.o-ListAction
    each item in links
      li.o-List__Item.o-ListAction__Item
        a.c-Btn.c-Btn--hilite(class=(more_classes || '') href=item.href)&attributes(item.attr || {})
          = item.text

mixin highlight(classes)
  aside.o-Runner.o-Runner--highlight(class=classes)
    div.o-Constrain
      block

mixin passList(conference, starred)
  ul.o-List.o-ListStacked
    include /_views/c-Pass.view.jade
    each $pass in conference.getPassesAll(starred)
      li.o-List__Item.o-ListStacked__Item
        +pass($pass, conference)

mixin speakerList(speakers)
  ul.o-List.o-ListStacked
    include /_views/c-Speaker.view.jade
    each person in speakers
      li.o-List__Item.o-ListStacked__Item
        +speaker(person)

mixin chairList(chairs)
  ul
    each $person in chairs
      li(itemprop="organizer" itemscope="" itemtype="http://schema.org/Person")
        +personEntireName($person)

mixin personEntireName($person)
  if $person.name().honorific_prefix
    span(itemprop="honorificPrefix")= $person.name().honorific_prefix
    = ' '
  span(itemprop="name")
    span(itemprop="givenName")= $person.name().given_name
    = ' '
    if $person.name().additional_name
      span(itemprop="additionalName")= $person.name().additional_name
      = ' '
    span(itemprop="familyName")= $person.name().family_name
  if $person.name().honorific_suffix
    = ', '
    span(itemprop="honorificSuffix")= $person.name().honorific_suffix
