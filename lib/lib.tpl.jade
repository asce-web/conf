doctype html
html(lang="en")
  include ../includes/_data-global.jade
  include ../includes/_mixins-global.jade
  include includes/_data-lib.jade
  include includes/_mixins-lib.jade
  head
    - var titles = ['ASCE Conferences Styleguide', 'Pattern Library']
    block vars
    title= title(titles)
    meta(charset="utf-8")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic")
    link(rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700")
    link(rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons")
    link(rel="stylesheet" href="https://cdn.rawgit.com/chharvey/xmeter/v4.1.0/xmeter.min.css")
    link(rel="stylesheet" href="https://cdn.rawgit.com/chharvey/bangs/v0.8.0/bangs.min.css")
    link(rel="stylesheet" href="../styles/conf.css")
    link(rel="stylesheet" href="styles/lib.css")
  body
    main
      block main
        header
          block main__header
            h1= mainH1(titles)
    footer
      nav
        h1 Subsitemap
        +menulist({pages: lib})
      nav
        h1 Sitemap
        ol
          li: a(href="../index.html") Home
          li: a(href="index.html") Pattern Library
          li: a(href="../sample/index.html") Sample Site
    //- SCRIPTS COPIED DIRECTLY FROM SAMPLE.TPL.JADE. TODO put in a separate js file
    script(src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous")
    script.
      function resizeProgram() {
        $('.c-Program').height(function () {
          return $(this).find('.c-Program__Schedule--shown').height()
                 + $(this).find('.c-Program__Schedule--shown').prev('h1').height()
                 + parseInt($(this).find('.c-Program__Schedule--shown').prev('h1').css('margin-bottom'))
        })
      }
      function updateProgram() {
        $('.c-Program__Hn').removeClass('c-Program__Hn--selected')
        $('.c-Program__Schedule').removeClass('c-Program__Schedule--hiddenBefore c-Program__Schedule--shown c-Program__Schedule--hiddenAfter')
        $(this).parents('.c-Program__Hn')
          .addClass('c-Program__Hn--selected')
          .next('.c-Program__Schedule').addClass('c-Program__Schedule--shown')
        $(this).parents('.c-Program__Hn').prevAll('.c-Program__Hn').next('.c-Program__Schedule').addClass('c-Program__Schedule--hiddenBefore')
        $(this).parents('.c-Program__Hn').nextAll('.c-Program__Hn').next('.c-Program__Schedule').addClass('c-Program__Schedule--hiddenAfter')
        resizeProgram()
      }
      $(window).resize(resizeProgram)
      $('.c-Program').addClass('-xz-c')
      $('.c-Program__Hn').width(100/$('.c-Program__Hn').length + '%')
      $('.c-Program__Schedule').addClass('-xo-1 -ps-a').css('left', 0).css('top', function () {
        return $(this).prev('h1').height()
               + parseInt($(this).prev('h1').css('margin-bottom'))
               + parseInt($(this).parents('.c-Program').css('padding-top'))
      })
      $('.c-Program__Check:checked').each(updateProgram)
      $('.c-Program__Check').change(updateProgram)
