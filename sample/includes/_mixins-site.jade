
//- ///////////////////////////////////////////////////////////////////////////////
//- //
//- // This file holds all functions & mixins for all microsites including the sample site.
//- //
//- ///////////////////////////////////////////////////////////////////////////////


-
  function urlify(str) {
    return encodeURIComponent(str.toLowerCase().replace(/[\W]+/g, '-'))
  }
  function getSponsor(name) {
    return arrayFind(sponsors, 'name', name)
  }
  function getPage(type, url) {
    return arrayFind(site_pages[type], 'href', url)
  }


mixin menulist(args)
  //- copied (almost) directly from ../../lib/includes/_mixins-lib.jade
  - var pages     = args.pages     || []
  - var class_obj = args.class_obj || {}
  - var depth     = +args.depth
  ul(class=class_obj.listclasses)
    each item in pages
      unless item.is_hidden
        li(class=class_obj.itemclasses)
          a(class=class_obj.linkclasses href=item.href)
            if args.icons && item.icon
              i.material-icons= item.icon.content
            span= item.name
          if item.sub && depth > 0
            +menulist({pages: item.sub, class_obj: (class_obj.sub || {}), depth: depth-1})

mixin actionchoices(items, classes, list_attr)
  - list_attr = list_attr || {}
  ul.o-ListBare.o-GridFlex.o-ListAction&attributes(list_attr)
    each obj in items
      - obj.attr = obj.attr || {}
      li.o-GridFlex__Item.o-ListAction__Item
        a(class=classes href=obj.href)&attributes(obj.attr)
          = obj.text
          block

mixin content_pass_student_fineprint()
  | Full-time students must show valid #[abbr(title="identification") ID] onsite at the registration desk when picking up name badge.

mixin location_callout_description()
  | With sweeping views of the surrounding mountains and a bustling downtown full of shopping, locally sourced dining, and entertainment, Portland is a wonderful destination for business and leisure.

mixin contact-form()
  form
    label
      | name
      input(type="text")
    label
      | email
      input(type="email")
    label
      | message
      textarea
    button submit

mixin minimal-text-block()
  div.o-Runner.o-Runner--highlight.minimal-text: div.o-ContentWrapper
    p.
      Join civil engineering professionals from around the world at
      this ASCE flagship event. Network with peers, earn PDHs, and
      expand your knowledge base.
    p #[a(href="") Lorem ipsum dolor sit amet], consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus sapien nunc eget odio.
    ul
      li 3&frac12; days of premier educational and networking events
      li 15 tracks and 6 plenary sessions focusing on ...
      li Prestigious awards and keynote lecture presentations
      li Lively programs for studdnts and young professionals

mixin rich-text-block()
  div.o-Runner.o-Runner--highlight.rich-text: div.o-ContentWrapper
    h2 a heading
    p #[a(href="") Lorem ipsum dolor sit amet], consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus sapien nunc eget odio.
    h3 another heading
    blockquote #[a(href="") Aenean euismod bibendum laoreet]. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci.
    ul
      li 3&frac12; days of premier educational and networking events
      li 15 tracks and 6 plenary sessions focusing on ...
      li Prestigious awards and keynote lecture presentations
      li Lively programs for studdnts and young professionals
    h2 a heading
    p Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus sapien nunc eget odio.
    h3 another heading
    blockquote Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci.
