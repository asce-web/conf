
//- ///////////////////////////////////////////////////////////////////////////////
//- //
//- // This file holds 'public' data for all microsites.
//- // It should only be changed when all microsites need changing.
//- //
//- ///////////////////////////////////////////////////////////////////////////////


script.
  var Site = (function () {
    //- CONSTRUCTOR
    function Site($siteinfo) {
      var self = this
      self.title      = $siteinfo.title
      self.tagline    = $siteinfo.tagline
      self.keywords   = $siteinfo.keywords
      self.conference = {}
      self.pages = {
        universal: [
          {
            name: '', url: 'index.html'
          }
        , {
            name: 'About', url: 'about.html'
          , icon: { content: 'info_outline', fallback: '&#xE88F;' }
          , sub: [
              { name: 'Cooperating Orgs', url: '' }
            , { name: 'Partnering Orgs ', url: '' }
            , { name: 'Volunteer       ', url: '' }
            , { name: 'Why Attend      ', url: '' }
            ]
          }
        , {
            name: 'Sponsor', url: 'sponsor.html'
          , icon: { content: 'people', fallback: '&#xE7FB;' }
          }
        , {
            name: 'Exhibit', url: 'exhibit.html'
          , icon: { content: 'work', fallback: '&#xE8F9;' }
          , sub: [
              { name: 'Exhibitor List', url: '' }
            ]
          }
        , {
            name: 'Contact', url: 'contact.html'
          , icon: { content: 'email', fallback: '&#xE0BE;' }
          }
        ]
      , internal: [
          {
            name: 'Home', url: 'home.html'
          , icon: { content: 'home', fallback: '&#xE88A;' }
          }
        , {
            name: 'Registration', url: 'registration.html'
          , icon: { content: 'shopping_cart', fallback: '&#xE8CC;' }
          , sub: [
              { name: 'Why Attend'     , url: '' }
            , { name: 'Short Courses'  , url: '' }
            , { name: 'Technical Tours', url: '' }
            , { name: 'Optional Tours' , url: '' }
            ]
          }
        , {
            name: 'Program', url: 'program.html'
          , icon: { content: 'event', fallback: '&#xE878;' }
          , sub: [
              { name: 'Events', url: '' }
            ]
          }
        , {
            name: 'Hotel & Travel', url: 'location.html'
          , icon: { content: 'flight', fallback: '&#xE539;' }
          , sub: [
              { name: 'International Travel', url: '' }
            ]
          }
        , {
            name: 'Speakers', url: 'speakers.html'
          , icon: { content: 'account_box', fallback: '&#xE851;' }
          , sub: [
              { name: 'Distinguished Lecture Series', url: '' }
            ]
          }
        ]
      }
      self.supporter_levels = []
      self.supporters = []
    }

    //- SETTER FUNCTIONS
    Site.prototype.setPage = function setPage() {
    }
    Site.prototype.setConference = function setConference(year, conference0) {
      this.conference[year] = conference0
      return this
    }
    Site.prototype.setCurrentConference = function setCurrentConference(year) {
      this.conference.current = this.getConference(year)
      return this
    }
    Site.prototype.addSupporterLevel = function addSupporterLevel(supporter_level) {
      this.supporter_levels.push(supporter_level)
      return this
    }
    Site.prototype.removeSupporterLevel = function removeSupporterLevel(supporter_level_name) {
      spliceFromArray(this.supporter_levels, this.getSupporterLevel(supporter_level_name))
      return this
    }
    Site.prototype.addSupporter = function addSupporter(supporter) {
      this.supporters.push(supporter)
      return this
    }
    Site.prototype.removeSupporter = function removeSupporter(supporter_name) {
      spliceFromArray(this.supporters, this.getSupporter(supporter_name))
      return this
    }

    //- GETTER FUNCTIONS
    Site.prototype.getPage = function getPage(type, url0) {
      return this.pages[type].find(function (item) { return item.url === url0 })
    }
    Site.prototype.getConference = function getConference(year) {
      return this.conference[year]
    }
    Site.prototype.getCurrentConference = function getCurrentConference() {
      return this.conference.current
    }
    Site.prototype.getSupporterLevel = function getSupporterLevel(supporter_level_name) {
      return this.supporter_levels.find(function (item) { return item.name === supporter_level_name })
    }
    Site.prototype.getSupporter = function getSupporter(supporter_name) {
      return this.supporters.find(function (item) { return item.name === supporter_name })
    }

    //- STATIC FIELDS
    Site.MENU_CLASS: {
      standard: {
        listclasses : 'o-ListBare o-GridFlex c-MenuStandard'
      , itemclasses : 'o-GridFlex__Item c-MenuStandard__Item'
      , linkclasses : 'o-Block c-MenuStandard__Link'
      , sub: {
          listclasses : 'o-ListBare c-MenuSub'
        , itemclasses : 'c-MenuSub__Item'
        , linkclasses : 'o-Block c-MenuSub__Link'
        }
      }
    , sitemap: {
        listclasses : 'o-ListBare o-GridFlex c-Sitemap'
      , itemclasses : 'o-GridFlex__Item c-Sitemap__Item'
      , sub: {
          listclasses : 'o-ListBare c-Sitemap__SubList'
        , itemclasses : 'c-Sitemap__SubItem'
        }
      }
    }

    return Site
  })()

  var SupporterLevel = (function () {
    function SupporterLevel(name) {
      var self = this
      self.name      = name
      self.classname = ''
    }
    SupporterLevel.prototype.setClassname = function setClassname(newname) {
      this.classname = newname
      return this
    }
    SupporterLevel.prototype.getClassname = function getClassname() {
      return this.classname
    }
    return SupporterLevel
  })()

  var Supporter = (function () {
    function Supporter(name) {
      var self = this
      self.name  = name
      self.img   = ''
      self.url   = ''
      self.level = null
    }
    Supporter.prototype.setImg = function setImg(img0) {
      this.img = img0
      return this
    }
    Supporter.prototype.setURL = function setURL(url0) {
      this.url = url0
      return this
    }
    Supporter.prototype.setLevel = function setLevel(supporter_level) {
      this.level = supporter_level
      return this
    }
    Supporter.prototype.getImg = function getImg() {
      return this.img
    }
    Supporter.prototype.getURL = function getURL() {
      return this.img
    }
    Supporter.prototype.getLevel = function getLevel() {
      return this.level
    }
    return Supporter
  })()

  var Conference = (function () {
    function Conference($confinfo) {
      var self = this
      self.name      = $confinfo.name
      self.theme     = $confinfo.theme
      self.startDate = $confinfo.startDate
      self.endDate   = $confinfo.endDate
      self.url       = $confinfo.url
      self.location  = {
        addressLocality     : $confinfo.city
      , addressRegion       : $confinfo.state
      , addressRegion_title : state_data.find(function (item) { return item.index === $confinfo.state }).name
      }
      self.pass_periods    = []
      self.passes          = []
      self.registration    = {}
      self.program_events  = []
      self.important_dates = []
    }

    //- SETTER FUNCTIONS
    Conference.prototype.addPassPeriod = function addPassPeriod(pass_period) {
      this.pass_periods.push(pass_period)
      return this
    }
    Conference.prototype.removePassPeriod = function removePassPeriod(pass_period_name) {
      //- this.pass_periods.splice(this.pass_periods.indexOf(this.getPassPeriod(pass_period_name)), 1)
      spliceFromArray(this.pass_periods, this.getPassPeriod(pass_period_name))
      return this
    }
    Conference.prototype.addPass = function addPass(pass) {
      this.passes.push(pass)
      return this
    }
    Conference.prototype.removePass = function removePass(pass_name) {
      spliceFromArray(this.passes, this.getPass(pass_name))
      return this
    }
    Conference.prototype.addProgramEvent = function addProgramEvent(program_event) {
      this.program_events.push(program_event)
      return this
    }
    Conference.prototype.removeProgramEvent = function removeProgramEvent(program_event_name) {
      spliceFromArray(this.program_events, this.getProgramEvent(program_event_name))
      return this
    }
    Conference.prototype.addImportantDate = function addImportantDate(important_date) {
      this.important_dates.push(program_event)
      return this
    }
    Conference.prototype.removeImportantDate = function removeImportantDate(important_date_name) {
      spliceFromArray(this.important_dates, this.getImportantDate(important_date_name))
      return this
    }

    //- GETTER FUNCTIONS
    Conference.prototype.getPassPeriod = function getPassPeriod(pass_period_name) {
      return this.pass_periods.find(function (item) { return item.name === pass_period_name })
    }
    Conference.prototype.getPass = function getPass(pass_name) {
      return this.passes.find(function (item) { return item.name === pass_name })
    }
    Conference.prototype.getProgramEvent = function getProgramEvent(program_event_name) {
      return this.program_events.find(function (item) { return item.name === program_event_name })
    }
    Conference.prototype.getImportantDate = function getImportantDate(important_date_name) {
      return this.important_dates.find(function (item) { return item.name === important_date_name })
    }

    //- MORE PROTO FUNCTIONS
    Conference.prototype.setPrice = function setPrice(pass_period, pass, membership, price) {
      pass_period = pass_period.name || pass_period
      pass        = pass.name        || pass
      membership  = membership.name  || membership
      this.registration[pass_period][pass][membership] = price
      return this
    }

    return Conference
  })()

  var PassPeriod = (function () {
    function PassPeriod($periodinfo) {
      var self = this
      self.name        = $periodinfo.name
      self.startDate   = $periodinfo.startDate
      self.endDate     = $periodinfo.endDate
    }
    return PassPeriod
  })()

  var Pass = (function () {
    function Pass($passinfo) {
      var self = this
      self.name        = $passinfo.name
      self.description = $passinfo.description
      self.memberships = []
    }
    //- SETTER FUNCTIONS
    Pass.prototype.addMembership = function addMembership(membership) {
      this.memberships.push(membership)
      return this
    }
    Pass.prototype.removeMembership = function removeMembership(membership_name) {
      spliceFromArray(this.memberships, this.getMembership(membership_name))
      return this
    }

    //- GETTER FUNCTIONS
    Pass.prototype.getMembership = function getMembership(membership_name) {
      return this.memberships.find(function (item) { return item.name === membership_name })
    }

    return Pass
  })()

  var Membership = (function () {
    function Membership(name, is_featured) {
      var self = this
      self.name        = name
      self.is_featured = is_featured
    }
    return Membership
  })()

  var ProgramEvent = (function () {
    function ProgramEvent($eventinfo) {
      var self = this
      self.name       = $eventinfo.name
      self.startDate  = $eventinfo.startDate
      self.endDate    = $eventinfo.endDate
    }
    ProgramEvent.prototype.setURL = function setURL(url0) {
      this.url = url0
      return this
    }
    ProgramEvent.prototype.setStar = function setStar(bool) {
      this.is_starred = bool
      return this
    }
    ProgramEvent.prototype.getURL = function getURL() {
      return this.url
    }
    ProgramEvent.prototype.isStarred = function isStarred() {
      return this.is_starred
    }
    return ProgramEvent
  })()

  var ImportantDate = (function () {
    function ImportantDate($actioninfo) {
      var self = this
      self.name       = $actioninfo.name
      self.startTime  = $actioninfo.startTime
      self.url = ''
    }
    ImportantDate.prototype.setURL = function setURL(url0) {
      this.url = url0
      return this
    }
    ImportantDate.prototype.getURL = function getURL() {
      return this.url
    }
    return ImportantDate
  })()

mixin sitemenulist(args)
  - var pages     = args.pages     || []
  - var class_obj = args.class_obj || {}
  - var depth     = +args.depth    || 0
  - var icons     = !!args.icons
  ul(class=class_obj.listclasses)
    each item in pages
      unless item.is_hidden
        li(class=class_obj.itemclasses)
          a(class=class_obj.linkclasses href=item.url)
            if args.icons && item.icon
              i.material-icons= item.icon.content
            span= item.name
          if item.sub && depth > 0
            +sitemenulist({pages: item.sub, class_obj: (class_obj.sub || {}), depth: depth-1})

mixin event-location-name(loc)
  span(itemprop="name")
    span(itemprop="addressLocality")= loc.addressLocality + ', '
    abbr(title=loc.addressRegion_title itemprop="addressRegion")
      = loc.addressRegion

mixin hero-content(event0)
  - event0 = event0 || {}
  h1.c-PageTitle.c-Hero__Name(itemprop="name")= event0.name
  meta(content=event0.url itemprop="url")
  p.c-Hero__Detail
    span.c-Hero__Place(itemprop="location" itemscope="" itemtype="http://schema.org/PostalAddress")
      +event-location-name(event0.location)
    span.c-Hero__Dates
      time(datetime=event0.startDate itemprop="startDate")
        - var start = new Date(event0.startDate)
        = month_names[start.getUTCMonth()].slice(0,3) + ' ' + start.getUTCDate()
      | &ndash;
      time(datetime=event0.endDate itemprop="endDate")
        - var end = new Date(event0.endDate)
        = month_names[end.getUTCMonth()].slice(0,3) + ' ' + end.getUTCDate()
  p.c-Hero__Theme(itemprop="description")
    if event0.theme
      = event0.theme
    else
      | &nbsp;

mixin otheryear-content(event0)
  - event0 = event0 || {}
  h1.c-OtherYear__Name(itemprop="name")= event0.name
  meta(content=event0.startDate itemprop="startDate")
  p.c-OtherYear__Detail(itemprop="location" itemscope="" itemtype="http://schema.org/PostalAddress")
    +event-location-name(event0.location)
  block
  ul.o-ListBare.o-GridFlex.o-ListAction
    li.o-GridFlex__Item.o-ListAction__Item
      a.c-Btn.c-Btn--hilite.c-Btn--ghost(href=event0.url itemprop="url") Event Details

mixin actionchoices(items, classes, list_attr)
  - list_attr = list_attr || {}
  ul.o-ListBare.o-GridFlex.o-ListAction&attributes(list_attr)
    each obj in items
      - obj.attr = obj.attr || {}
      li.o-GridFlex__Item.o-ListAction__Item
        a(class=classes href=obj.href)&attributes(obj.attr)
          = obj.text
          block

mixin minimal-text-block()
  div.o-Runner.o-Runner--highlight.minimal-text: div.o-ContentWrapper
    p.
      Join civil engineering professionals from around the world at
      this ASCE flagship event. Network with peers, earn PDHs, and
      expand your knowledge base.
    p #[a(href="") Lorem ipsum dolor sit amet], consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus sapien nunc eget odio.
    ul
      li 3&frac12; days of premier educational and networking events
      li 15 tracks and 6 plenary sessions focusing on ...
      li Prestigious awards and keynote lecture presentations
      li Lively programs for studdnts and young professionals

mixin rich-text-block()
  div.o-Runner.o-Runner--highlight.rich-text: div.o-ContentWrapper
    h2 a heading
    p #[a(href="") Lorem ipsum dolor sit amet], consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus sapien nunc eget odio.
    h3 another heading
    blockquote #[a(href="") Aenean euismod bibendum laoreet]. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci.
    ul
      li 3&frac12; days of premier educational and networking events
      li 15 tracks and 6 plenary sessions focusing on ...
      li Prestigious awards and keynote lecture presentations
      li Lively programs for studdnts and young professionals
    h2 a heading
    p Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci, sed rhoncus sapien nunc eget odio.
    h3 another heading
    blockquote Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Proin sodales pulvinar tempor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam fermentum, nulla luctus pharetra vulputate, felis tellus mollis orci.
